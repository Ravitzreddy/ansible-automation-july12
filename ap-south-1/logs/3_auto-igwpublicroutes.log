ansible-playbook 2.8.2
  config file = /etc/ansible/ansible.cfg
  configured module search path = ['/root/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']
  ansible python module location = /usr/local/lib/python3.6/site-packages/ansible
  executable location = /usr/local/bin/ansible-playbook
  python version = 3.6.8 (default, Apr  3 2019, 17:26:03) [GCC 8.2.1 20180905 (Red Hat 8.2.1-3)]
Using /etc/ansible/ansible.cfg as config file
setting up inventory plugins
host_list declined parsing /etc/ansible/ap-south-1/ec2.py as it did not pass it's verify_file() method
Skipping due to inventory source not existing or not being readable by the current user
script declined parsing /etc/ansible/ap-south-1/ec2.py as it did not pass it's verify_file() method
auto declined parsing /etc/ansible/ap-south-1/ec2.py as it did not pass it's verify_file() method
Skipping due to inventory source not existing or not being readable by the current user
yaml declined parsing /etc/ansible/ap-south-1/ec2.py as it did not pass it's verify_file() method
Skipping due to inventory source not existing or not being readable by the current user
ini declined parsing /etc/ansible/ap-south-1/ec2.py as it did not pass it's verify_file() method
Skipping due to inventory source not existing or not being readable by the current user
toml declined parsing /etc/ansible/ap-south-1/ec2.py as it did not pass it's verify_file() method
Loading callback plugin default of type stdout, v2.0 from /usr/local/lib/python3.6/site-packages/ansible/plugins/callback/default.py

PLAYBOOK: 3_auto-igwpublicroutes.yaml ***************************************************************************************************
Positional arguments: /etc/ansible/ap-south-1/3_auto-igwpublicroutes.yaml
verbosity: 4
private_key_file: /home/ec2-user/mykeypair
connection: smart
timeout: 10
become_method: sudo
tags: ('all',)
inventory: ('/etc/ansible/ap-south-1/ec2.py',)
extra_vars: ('@/etc/ansible/ap-south-1/group_vars/all3.yaml',)
forks: 5
1 plays in /etc/ansible/ap-south-1/3_auto-igwpublicroutes.yaml

PLAY [localhost] ************************************************************************************************************************

TASK [Gathering Facts] ******************************************************************************************************************
task path: /etc/ansible/ap-south-1/3_auto-igwpublicroutes.yaml:2
<127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
<127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
<127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1562955746.0181003-267775759651472 `" && echo ansible-tmp-1562955746.0181003-267775759651472="` echo /root/.ansible/tmp/ansible-tmp-1562955746.0181003-267775759651472 `" ) && sleep 0'
Using module file /usr/local/lib/python3.6/site-packages/ansible/modules/system/setup.py
<127.0.0.1> PUT /root/.ansible/tmp/ansible-local-7602ehdekvik/tmphqii55ug TO /root/.ansible/tmp/ansible-tmp-1562955746.0181003-267775759651472/AnsiballZ_setup.py
<127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1562955746.0181003-267775759651472/ /root/.ansible/tmp/ansible-tmp-1562955746.0181003-267775759651472/AnsiballZ_setup.py && sleep 0'
<127.0.0.1> EXEC /bin/sh -c '/usr/bin/python3.6 /root/.ansible/tmp/ansible-tmp-1562955746.0181003-267775759651472/AnsiballZ_setup.py && sleep 0'
<127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1562955746.0181003-267775759651472/ > /dev/null 2>&1 && sleep 0'
ok: [localhost]
META: ran handlers

TASK [create route table for public subnets and add IGW to route] ***********************************************************************
task path: /etc/ansible/ap-south-1/3_auto-igwpublicroutes.yaml:6
<127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
<127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
<127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1562955747.0380683-177778596617082 `" && echo ansible-tmp-1562955747.0380683-177778596617082="` echo /root/.ansible/tmp/ansible-tmp-1562955747.0380683-177778596617082 `" ) && sleep 0'
Using module file /usr/local/lib/python3.6/site-packages/ansible/modules/cloud/amazon/ec2_vpc_route_table.py
<127.0.0.1> PUT /root/.ansible/tmp/ansible-local-7602ehdekvik/tmp9k7p21ib TO /root/.ansible/tmp/ansible-tmp-1562955747.0380683-177778596617082/AnsiballZ_ec2_vpc_route_table.py
<127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1562955747.0380683-177778596617082/ /root/.ansible/tmp/ansible-tmp-1562955747.0380683-177778596617082/AnsiballZ_ec2_vpc_route_table.py && sleep 0'
<127.0.0.1> EXEC /bin/sh -c '/usr/bin/python3.6 /root/.ansible/tmp/ansible-tmp-1562955747.0380683-177778596617082/AnsiballZ_ec2_vpc_route_table.py && sleep 0'
<127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1562955747.0380683-177778596617082/ > /dev/null 2>&1 && sleep 0'
<127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
changed: [localhost] => (item=[{'routename': 'SUB1-PUBL-VPCA-IGW'}, {'igrvpc': 'vpc-03f14f659c6c1c8b7', 'igrregion': 'ap-south-1', 'igrsubnet': 'subnet-0e6eaab33cdc394d6', 'igrgatewayid': 'igw-0d1e1a4c81b47e392'}]) => {
    "ansible_loop_var": "item",
    "changed": true,
    "invocation": {
        "module_args": {
            "aws_access_key": null,
            "aws_secret_key": null,
            "debug_botocore_endpoint_logs": false,
            "ec2_url": null,
            "lookup": "tag",
            "profile": null,
            "propagating_vgw_ids": null,
            "purge_routes": true,
            "purge_subnets": true,
            "purge_tags": false,
            "region": "ap-south-1",
            "route_table_id": null,
            "routes": [
                {
                    "destination_cidr_block": "0.0.0.0/0",
                    "gateway_id": "igw-0d1e1a4c81b47e392"
                }
            ],
            "security_token": null,
            "state": "present",
            "subnets": [
                "subnet-0e6eaab33cdc394d6"
            ],
            "tags": {
                "Name": "SUB1-PUBL-VPCA-IGW"
            },
            "validate_certs": true,
            "vpc_id": "vpc-03f14f659c6c1c8b7"
        }
    },
    "item": [
        {
            "routename": "SUB1-PUBL-VPCA-IGW"
        },
        {
            "igrgatewayid": "igw-0d1e1a4c81b47e392",
            "igrregion": "ap-south-1",
            "igrsubnet": "subnet-0e6eaab33cdc394d6",
            "igrvpc": "vpc-03f14f659c6c1c8b7"
        }
    ],
    "route_table": {
        "associations": [
            {
                "main": false,
                "route_table_association_id": "rtbassoc-0c652c57fd54ebf76",
                "route_table_id": "rtb-0e42ab00ab9c3846a",
                "subnet_id": "subnet-0e6eaab33cdc394d6"
            }
        ],
        "id": "rtb-0e42ab00ab9c3846a",
        "owner_id": "802778636482",
        "propagating_vgws": [],
        "route_table_id": "rtb-0e42ab00ab9c3846a",
        "routes": [
            {
                "destination_cidr_block": "10.0.0.0/16",
                "gateway_id": "local",
                "origin": "CreateRouteTable",
                "state": "active"
            },
            {
                "destination_cidr_block": "0.0.0.0/0",
                "gateway_id": "igw-0d1e1a4c81b47e392",
                "origin": "CreateRoute",
                "state": "active"
            }
        ],
        "tags": {
            "Name": "SUB1-PUBL-VPCA-IGW"
        },
        "vpc_id": "vpc-03f14f659c6c1c8b7"
    }
}
<127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1562955753.6785624-141792164320003 `" && echo ansible-tmp-1562955753.6785624-141792164320003="` echo /root/.ansible/tmp/ansible-tmp-1562955753.6785624-141792164320003 `" ) && sleep 0'
Using module file /usr/local/lib/python3.6/site-packages/ansible/modules/cloud/amazon/ec2_vpc_route_table.py
<127.0.0.1> PUT /root/.ansible/tmp/ansible-local-7602ehdekvik/tmpttkf1jjk TO /root/.ansible/tmp/ansible-tmp-1562955753.6785624-141792164320003/AnsiballZ_ec2_vpc_route_table.py
<127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1562955753.6785624-141792164320003/ /root/.ansible/tmp/ansible-tmp-1562955753.6785624-141792164320003/AnsiballZ_ec2_vpc_route_table.py && sleep 0'
<127.0.0.1> EXEC /bin/sh -c '/usr/bin/python3.6 /root/.ansible/tmp/ansible-tmp-1562955753.6785624-141792164320003/AnsiballZ_ec2_vpc_route_table.py && sleep 0'
<127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1562955753.6785624-141792164320003/ > /dev/null 2>&1 && sleep 0'
<127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
changed: [localhost] => (item=[{'routename': 'SUB5-PUBL-VPCA-IGW'}, {'igrvpc': 'vpc-03f14f659c6c1c8b7', 'igrregion': 'ap-south-1', 'igrsubnet': 'subnet-05181281f5747a923', 'igrgatewayid': 'igw-0d1e1a4c81b47e392'}]) => {
    "ansible_loop_var": "item",
    "changed": true,
    "invocation": {
        "module_args": {
            "aws_access_key": null,
            "aws_secret_key": null,
            "debug_botocore_endpoint_logs": false,
            "ec2_url": null,
            "lookup": "tag",
            "profile": null,
            "propagating_vgw_ids": null,
            "purge_routes": true,
            "purge_subnets": true,
            "purge_tags": false,
            "region": "ap-south-1",
            "route_table_id": null,
            "routes": [
                {
                    "destination_cidr_block": "0.0.0.0/0",
                    "gateway_id": "igw-0d1e1a4c81b47e392"
                }
            ],
            "security_token": null,
            "state": "present",
            "subnets": [
                "subnet-05181281f5747a923"
            ],
            "tags": {
                "Name": "SUB5-PUBL-VPCA-IGW"
            },
            "validate_certs": true,
            "vpc_id": "vpc-03f14f659c6c1c8b7"
        }
    },
    "item": [
        {
            "routename": "SUB5-PUBL-VPCA-IGW"
        },
        {
            "igrgatewayid": "igw-0d1e1a4c81b47e392",
            "igrregion": "ap-south-1",
            "igrsubnet": "subnet-05181281f5747a923",
            "igrvpc": "vpc-03f14f659c6c1c8b7"
        }
    ],
    "route_table": {
        "associations": [
            {
                "main": false,
                "route_table_association_id": "rtbassoc-0241686a6ec9c2dc9",
                "route_table_id": "rtb-0bd34a4b577cc89e9",
                "subnet_id": "subnet-05181281f5747a923"
            }
        ],
        "id": "rtb-0bd34a4b577cc89e9",
        "owner_id": "802778636482",
        "propagating_vgws": [],
        "route_table_id": "rtb-0bd34a4b577cc89e9",
        "routes": [
            {
                "destination_cidr_block": "10.0.0.0/16",
                "gateway_id": "local",
                "origin": "CreateRouteTable",
                "state": "active"
            },
            {
                "destination_cidr_block": "0.0.0.0/0",
                "gateway_id": "igw-0d1e1a4c81b47e392",
                "origin": "CreateRoute",
                "state": "active"
            }
        ],
        "tags": {
            "Name": "SUB5-PUBL-VPCA-IGW"
        },
        "vpc_id": "vpc-03f14f659c6c1c8b7"
    }
}
<127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1562955760.1159787-167214177924098 `" && echo ansible-tmp-1562955760.1159787-167214177924098="` echo /root/.ansible/tmp/ansible-tmp-1562955760.1159787-167214177924098 `" ) && sleep 0'
Using module file /usr/local/lib/python3.6/site-packages/ansible/modules/cloud/amazon/ec2_vpc_route_table.py
<127.0.0.1> PUT /root/.ansible/tmp/ansible-local-7602ehdekvik/tmp41zwsehw TO /root/.ansible/tmp/ansible-tmp-1562955760.1159787-167214177924098/AnsiballZ_ec2_vpc_route_table.py
<127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1562955760.1159787-167214177924098/ /root/.ansible/tmp/ansible-tmp-1562955760.1159787-167214177924098/AnsiballZ_ec2_vpc_route_table.py && sleep 0'
<127.0.0.1> EXEC /bin/sh -c '/usr/bin/python3.6 /root/.ansible/tmp/ansible-tmp-1562955760.1159787-167214177924098/AnsiballZ_ec2_vpc_route_table.py && sleep 0'
<127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1562955760.1159787-167214177924098/ > /dev/null 2>&1 && sleep 0'
changed: [localhost] => (item=[{'routename': 'SUB6-PUBL-VPCB-IGW'}, {'igrvpc': 'vpc-0195c1d6ee5610e98', 'igrregion': 'ap-south-1', 'igrsubnet': 'subnet-01306dd19c6fd38a3', 'igrgatewayid': 'igw-0bd7b7013cda9eb2d'}]) => {
    "ansible_loop_var": "item",
    "changed": true,
    "invocation": {
        "module_args": {
            "aws_access_key": null,
            "aws_secret_key": null,
            "debug_botocore_endpoint_logs": false,
            "ec2_url": null,
            "lookup": "tag",
            "profile": null,
            "propagating_vgw_ids": null,
            "purge_routes": true,
            "purge_subnets": true,
            "purge_tags": false,
            "region": "ap-south-1",
            "route_table_id": null,
            "routes": [
                {
                    "destination_cidr_block": "0.0.0.0/0",
                    "gateway_id": "igw-0bd7b7013cda9eb2d"
                }
            ],
            "security_token": null,
            "state": "present",
            "subnets": [
                "subnet-01306dd19c6fd38a3"
            ],
            "tags": {
                "Name": "SUB6-PUBL-VPCB-IGW"
            },
            "validate_certs": true,
            "vpc_id": "vpc-0195c1d6ee5610e98"
        }
    },
    "item": [
        {
            "routename": "SUB6-PUBL-VPCB-IGW"
        },
        {
            "igrgatewayid": "igw-0bd7b7013cda9eb2d",
            "igrregion": "ap-south-1",
            "igrsubnet": "subnet-01306dd19c6fd38a3",
            "igrvpc": "vpc-0195c1d6ee5610e98"
        }
    ],
    "route_table": {
        "associations": [
            {
                "main": false,
                "route_table_association_id": "rtbassoc-0c90a4dac5d2d86aa",
                "route_table_id": "rtb-007f9a68c296eba63",
                "subnet_id": "subnet-01306dd19c6fd38a3"
            }
        ],
        "id": "rtb-007f9a68c296eba63",
        "owner_id": "802778636482",
        "propagating_vgws": [],
        "route_table_id": "rtb-007f9a68c296eba63",
        "routes": [
            {
                "destination_cidr_block": "10.1.0.0/16",
                "gateway_id": "local",
                "origin": "CreateRouteTable",
                "state": "active"
            },
            {
                "destination_cidr_block": "0.0.0.0/0",
                "gateway_id": "igw-0bd7b7013cda9eb2d",
                "origin": "CreateRoute",
                "state": "active"
            }
        ],
        "tags": {
            "Name": "SUB6-PUBL-VPCB-IGW"
        },
        "vpc_id": "vpc-0195c1d6ee5610e98"
    }
}
META: ran handlers
META: ran handlers

PLAY RECAP ******************************************************************************************************************************
localhost                  : ok=2    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   

